{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { HttpParams } from '@angular/common/http';\nexport let HomeComponent = class HomeComponent {\n  constructor(router, http) {\n    this.router = router;\n    this.http = http;\n    //This is to Validate the login\n    this.Ident = \"\";\n    this.Password = \"\";\n    this.loginError = false;\n    this.selectOptions = [];\n    this.apiUrl = 'https://phpapicsci467.azurewebsites.net/php_script/QuerySalesAssoc.php';\n  }\n  //This function is used to close the form and redisplay the login button\n  CloseLogin() {\n    const Spinning = [{\n      transform: \"scale(1)\"\n    }, {\n      transform: \"scale(0)\"\n    }];\n    const SpinOutTiming = {\n      duration: 1000,\n      iterations: 1\n    };\n    const forDisplay = document.getElementById(\"LoginForm\");\n    const logButton = document.getElementById(\"OpenLogin\");\n    const closeButton = document.getElementById(\"CloseLogin\");\n    if (forDisplay != null && logButton != null && closeButton != null) {\n      forDisplay.animate(Spinning, SpinOutTiming);\n      setTimeout(function () {\n        forDisplay.style.visibility = \"hidden\";\n      }, 900);\n    }\n  }\n  ValidateLogin(event) {\n    const params = new HttpParams().set('Ident', this.Ident).set('password', this.Password);\n    this.http.get(this.apiUrl, {\n      params: params\n    }).subscribe({\n      next: data => {\n        //if Login data is not a valid user\n        if (data.length === 0) {\n          this.loginError = true;\n        } else {\n          localStorage.setItem('CurrentAssoc', JSON.stringify(data[0]['ID']));\n          localStorage.setItem('AssocName', JSON.stringify(data[0]['Name']));\n          localStorage.setItem('AdminFlag', JSON.stringify(data[0]['AdminFlag']));\n          if (data[0]['AdminFlag'] == 'M') {\n            this.router.navigateByUrl('/quoteedit');\n          } else if (data[0]['AdminFlag'] == 'Y') {\n            this.router.navigateByUrl('/admindash');\n          } else {\n            this.router.navigateByUrl('/quote');\n          }\n        }\n      },\n      error: error => {\n        // Handle errors\n        console.log(error);\n        this.loginError = true;\n      }\n    });\n  }\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);","map":{"version":3,"names":["Component","HttpParams","HomeComponent","constructor","router","http","Ident","Password","loginError","selectOptions","apiUrl","CloseLogin","Spinning","transform","SpinOutTiming","duration","iterations","forDisplay","document","getElementById","logButton","closeButton","animate","setTimeout","style","visibility","ValidateLogin","event","params","set","get","subscribe","next","data","length","localStorage","setItem","JSON","stringify","navigateByUrl","error","console","log","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ledon\\Desktop\\CSCI467-Group-Project\\src\\app\\home\\home.component.ts"],"sourcesContent":["import { Component, Directive, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\n\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.css']\r\n})\r\n\r\n\r\nexport class HomeComponent {\r\n\r\n  constructor(private router: Router, private http : HttpClient){}\r\n\r\n  //This function is used to close the form and redisplay the login button\r\n  CloseLogin(): void{\r\n    const Spinning = [\r\n      { transform: \"scale(1)\" },\r\n      { transform: \"scale(0)\" },\r\n    ];\r\n    \r\n    const SpinOutTiming = {\r\n      duration: 1000,\r\n      iterations: 1,\r\n    };\r\n    const forDisplay = document.getElementById(\"LoginForm\");\r\n    const logButton = document.getElementById(\"OpenLogin\");\r\n    const closeButton = document.getElementById(\"CloseLogin\");\r\n\r\n    if(forDisplay != null && logButton != null && closeButton != null){\r\n      forDisplay.animate(Spinning, SpinOutTiming);\r\n      setTimeout(function(){\r\n        forDisplay.style.visibility=\"hidden\";\r\n      }, 900);\r\n    }\r\n  }\r\n\r\n  //This is to Validate the login\r\n  Ident : string=\"\";\r\n  Password : string=\"\";\r\n  loginError: boolean = false;\r\n  selectOptions: any[] = [];\r\n  private apiUrl = 'https://phpapicsci467.azurewebsites.net/php_script/QuerySalesAssoc.php';\r\n  ValidateLogin(event : Event){\r\n    const params = new HttpParams()\r\n      .set('Ident', this.Ident)\r\n      .set('password', this.Password);\r\n      \r\n      this.http.get(this.apiUrl,{params: params}).subscribe({\r\n        next: (data: any) => {\r\n          //if Login data is not a valid user\r\n          if(data.length === 0){\r\n            this.loginError = true;\r\n          }else{\r\n            localStorage.setItem('CurrentAssoc', JSON.stringify(data[0]['ID']));\r\n            localStorage.setItem('AssocName', JSON.stringify(data[0]['Name']));\r\n            localStorage.setItem('AdminFlag',JSON.stringify(data[0]['AdminFlag']));\r\n            if(data[0]['AdminFlag'] == 'M'){\r\n              this.router.navigateByUrl('/quoteedit');\r\n            }else if(data[0]['AdminFlag'] == 'Y'){\r\n              this.router.navigateByUrl('/admindash');\r\n            }else{\r\n              this.router.navigateByUrl('/quote');\r\n            }\r\n          }\r\n        },\r\n        error: (error) => {\r\n          // Handle errors\r\n          console.log(error);\r\n          this.loginError = true;\r\n        }\r\n      });\r\n  }\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}